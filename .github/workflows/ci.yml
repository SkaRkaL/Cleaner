name: Bash CI Pipeline

on:
  push:
    branches: [ "master" ]
  pull_request:
    branches: [ "master" ]

jobs:
  test-cleaner:
    runs-on: ubuntu-latest

    steps:
      # 1Ô∏è‚É£ Checkout your repository
      - name: Checkout code
        uses: actions/checkout@v4

      # 2Ô∏è‚É£ Validate syntax of all shell scripts
      - name: Check Bash syntax
        run: |
          echo "üîç Checking syntax for all .sh files..."
          find . -type f -name "*.sh" -exec bash -n {} \;

      # 3Ô∏è‚É£ Run Cleaner.sh safely
      - name: Run Cleaner.sh (dry run)
        run: |
          echo "‚öôÔ∏è Testing Cleaner.sh..."
          chmod +x ./Cleaner.sh
          ./Cleaner.sh --help || true

      # 4Ô∏è‚É£ Show repo structure (optional)
      - name: List workspace
        run: ls -la
